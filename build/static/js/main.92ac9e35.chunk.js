(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(2),a=n(12),u=n.n(a),o=n(3),i=n(4),s=n.n(i),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},create:function(e){return s.a.post(l,e).then((function(e){return e.data}))},deleteItem:function(e){return s.a.delete("".concat(l,"/").concat(e))},update:function(e,t){return s.a.put("".concat(l,"/").concat(e),t)}},f=function(e){var t=e.searchName,n=e.handleSearchNameChange;return Object(c.jsxs)("div",{children:["Search:",Object(c.jsx)("input",{value:t,onChange:n})]})},j=function(e){var t=e.newName,n=e.newNumber,r=e.handleNameChange,a=e.handleNumberChange,u=e.addName;return Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:r}),Object(c.jsx)("br",{}),"number: ",Object(c.jsx)("input",{value:n,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",onClick:u,children:"add"})})]})},b=function(e){var t=e.persons,n=e.setPersons,r=e.setNotify;return console.log(t),Object(c.jsx)("ul",{children:t.map((function(e){return Object(c.jsx)(h,{persons:t,person:e,setPersons:n,setNotify:r},e.id)}))})},h=function(e){var t,n,r=e.person,a=e.setPersons,u=e.persons,o=e.setNotify;return Object(c.jsxs)("li",{children:[r.name," ",r.number," ",Object(c.jsx)("button",{onClick:(t=r.id,n=r.name,function(){window.confirm("Are you sure you want to delete ".concat(n,"?"))&&d.deleteItem(t).then((function(e){var c=u.filter((function(e){return e.id!==t}));a(c),o("".concat(n," successfully deleted")),setTimeout((function(){return o(null)}),4e3)})).catch((function(e){o("Sorry, ".concat(n," may have been deleted from the database")),setTimeout((function(){return o(null)}),4e3),a(u.filter((function(e){return e.id!==t})))}))}),children:"Delete"})]})},m=function(e){var t=e.notify;return t?t.includes("Sorry")?Object(c.jsx)("div",{className:"error-notification",children:Object(c.jsx)("p",{children:t})}):Object(c.jsx)("div",{className:"success-notification",children:Object(c.jsx)("p",{children:t})}):null},O=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],u=Object(r.useState)(n),i=Object(o.a)(u,2),s=i[0],l=i[1],h=Object(r.useState)(""),O=Object(o.a)(h,2),p=O[0],v=O[1],x=Object(r.useState)(""),N=Object(o.a)(x,2),y=N[0],g=N[1],w=Object(r.useState)(""),C=Object(o.a)(w,2),S=C[0],k=C[1],P=Object(r.useState)(""),T=Object(o.a)(P,2),A=T[0],I=T[1];Object(r.useEffect)((function(){d.getAll().then((function(e){a(e),l(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(m,{notify:A}),Object(c.jsx)(f,{searchName:S,handleSearchNameChange:function(e){k(e.target.value);var t=s.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));a(t)}}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{newName:p,newNumber:y,addName:function(e){e.preventDefault();var t={name:p,number:y};if(n.some((function(e){return e.name===p}))){var c=n.find((function(e){return e.name===p}));window.confirm("".concat(p," is already in phonebook, do you want to replace the number?"))&&d.update(c.id,t).then((function(e){a(n.map((function(t){return t.id!==c.id?t:e.data}))),I("".concat(p," successfully updated")),setTimeout((function(){return I(null)}),4e3)})).catch((function(e){I("Sorry, ".concat(c.name," may have been deleted from the database")),setTimeout((function(){return I(null)}),4e3),a(n.filter((function(e){return e.id!==c.id})))}))}else d.create(t).then((function(e){a(n.concat(e)),I("".concat(p," successfully added")),setTimeout((function(){return I(null)}),5e3)}));v(""),g("")},handleNameChange:function(e){v(e.target.value)},handleNumberChange:function(e){g(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(b,{persons:n,setPersons:a,setNotify:I})]})};n(36);u.a.render(Object(c.jsx)(O,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.92ac9e35.chunk.js.map